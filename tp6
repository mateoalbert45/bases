No se que copie xd pero supongo que me va  servir


para hcer una restriccion declarativa tengo que buscar lo que esta mal y poner un not exists


alter table contiene add constraint chk_ejemplo
check_no exits(
select 1 
from contiene
group by cod_palabra, idioma
having vount (*) > 5))

create or replace function ejemplo_palabrfa () returns trigger as $body$
begin if(exists( select 1 
from contiene c
where c.cod_palabra = new.cod_palabra and c.idioma = new.idioma
group by cod_palabra, idioma
having vount (*) > 5)) then
raise excepcion 'palabra en mas de 5 articulos'
end if;
return new;
end;


create trigger nombre
after insert or update on contiene for each row execute procedure...;

ejercicio 2.1
CREATE DOMAIN  sueldoValido 
sueldo_maximo numeric(7,2)
CHECK (sueldo_maximo > sueldo_minimo);

ejercicio 2.2
alter table empleado add constraint cantidadEmpleados
check not exists(
select 1
from empleado 
group by id_departamento, id_distribuidor
having count(id_empleado) > 70
)
ejercicio 2.3
CREATE ASSERTION  JefesMismoDepartamento CHECK not exists(select *
from empleado e join empleado j on(e.id_jefe = j.id_empleado)
where e.id_departamento = j.id_departamento and e.id_distribuidor = j.id_distribuidor
order by e.id_empleado
limit 100);



